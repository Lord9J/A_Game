[gd_scene load_steps=17 format=2]

[ext_resource path="res://UI/player/UI.gd" type="Script" id=1]
[ext_resource path="res://ARTs/PNG/ProgressBar_06/BarV6_ProgressBar.png" type="Texture" id=2]
[ext_resource path="res://ARTs/PNG/ProgressBar_05/BarV5_Bar.png" type="Texture" id=3]
[ext_resource path="res://fonts/poco/Poco.tres" type="DynamicFont" id=4]
[ext_resource path="res://ARTs/PNG/ProgressBar_03/BarV3_ProgressBar.png" type="Texture" id=5]
[ext_resource path="res://ARTs/PNG/ProgressBar_03/BarV3_Bar.png" type="Texture" id=6]
[ext_resource path="res://ARTs/MAP/future-tds/dark.png" type="Texture" id=7]
[ext_resource path="res://MainMenu/MainMenu.tres" type="Theme" id=8]
[ext_resource path="res://ARTs/noise_combined.png" type="Texture" id=9]
[ext_resource path="res://Shaders/noise_combined.png" type="Texture" id=10]
[ext_resource path="res://WORLDS/Purple Nebula 1 - 1024x1024.png" type="Texture" id=12]
[ext_resource path="res://UI/player/MainMenu.gd" type="Script" id=13]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;

uniform sampler2D noise_img;
uniform float speed = 1.0;
uniform vec4 smoke_color : hint_color;

void fragment(){
	vec2 uv1 = vec2(UV.x + TIME*speed, UV.y);
	vec2 uv2 = vec2(UV.x - TIME*speed, UV.y);
	vec2 uv3 = vec2(UV.x, UV.y + TIME*speed);
	
	
	float noise_r = texture( noise_img, uv1 ).r;
	float noise_g = texture( noise_img, uv2 ).g;
	float noise_b = texture( noise_img, uv3 ).b;
	
	vec3 new_color = vec3(noise_r, noise_g, noise_b);
	
	float new_alpha = noise_r * noise_g * noise_b;
	
	COLOR.rgb = smoke_color.rgb;//texture(TEXTURE, UV).rgb;
	COLOR.a = clamp(new_alpha * 5.0 * texture(TEXTURE, UV).a, 0.0, 1.0);
}"

[sub_resource type="ShaderMaterial" id=1676]
shader = SubResource( 1 )
shader_param/speed = 0.022
shader_param/smoke_color = Color( 0.231373, 0.0392157, 0.282353, 1 )
shader_param/noise_img = ExtResource( 9 )

[sub_resource type="Shader" id=1675]
code = "shader_type canvas_item;
 uniform vec2 dir;
uniform sampler2D col_ramp;
 void fragment( )
 {
	vec2 half = abs(0.5 - UV);
  	vec4 tex = texture(TEXTURE, UV + dir * TIME);
 	vec4 col = texture(col_ramp, vec2(tex.a - length(half), 0));
	COLOR = tex * col;
}
"

[sub_resource type="ShaderMaterial" id=1677]
shader = SubResource( 1675 )
shader_param/dir = Vector2( 0.01, 0 )
shader_param/col_ramp = ExtResource( 10 )

[node name="UI" type="CanvasLayer"]
pause_mode = 2
script = ExtResource( 1 )

[node name="HPBar" type="TextureRect" parent="."]
margin_left = 109.0
margin_top = 48.0
margin_right = 381.0
margin_bottom = 69.0
rect_scale = Vector2( 1, 1.247 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="TextureProgress" type="TextureProgress" parent="HPBar"]
margin_left = -35.4867
margin_top = 196.362
margin_right = 236.513
margin_bottom = 217.362
rect_rotation = -90.0
rect_scale = Vector2( 0.756, 1 )
value = 100.0
rounded = true
texture_under = ExtResource( 3 )
texture_progress = ExtResource( 2 )
texture_progress_offset = Vector2( 4.022, 2.47 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="fps_label" type="Label" parent="."]
margin_left = 80.0
margin_top = 321.0
margin_right = 120.0
margin_bottom = 335.0
rect_scale = Vector2( 1.28663, 1.28663 )
text = "FPS: "
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VBoxContainer" type="VBoxContainer" parent="."]
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -174.0
margin_top = -80.0
margin_right = -54.6292
margin_bottom = -41.0
grow_horizontal = 0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HBoxContainer" type="HBoxContainer" parent="VBoxContainer"]
margin_right = 119.0
margin_bottom = 39.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ammo_label" type="Label" parent="VBoxContainer/HBoxContainer"]
margin_right = 108.0
margin_bottom = 39.0
custom_fonts/font = ExtResource( 4 )
text = " 0/100"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VBoxContainer2" type="VBoxContainer" parent="."]
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -174.0
margin_top = -65.0
margin_right = 98.0
margin_bottom = -44.0
grow_horizontal = 0
rect_scale = Vector2( 0.474, 0.628 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HBoxContainer" type="HBoxContainer" parent="VBoxContainer2"]
margin_right = 272.0
margin_bottom = 21.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ammoProgress" type="TextureProgress" parent="VBoxContainer2/HBoxContainer"]
margin_right = 272.0
margin_bottom = 21.0
max_value = 200.0
texture_under = ExtResource( 6 )
texture_progress = ExtResource( 5 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="GameMenu" type="Control" parent="."]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
theme = ExtResource( 8 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="MainMenu" type="MarginContainer" parent="GameMenu"]
anchor_left = 0.5
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -182.098
margin_top = 52.8441
margin_right = 306.902
margin_bottom = 52.8441
script = ExtResource( 13 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="CenterContainer" type="CenterContainer" parent="GameMenu/MainMenu"]
margin_right = 489.0
margin_bottom = 1080.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Fire" type="Sprite" parent="GameMenu/MainMenu/CenterContainer"]
modulate = Color( 1, 1, 1, 0.537255 )
material = SubResource( 1676 )
position = Vector2( 152.5, 483 )
scale = Vector2( 17.6269, 17.6269 )
z_index = 1
texture = ExtResource( 7 )

[node name="Space_fon" type="Sprite" parent="GameMenu/MainMenu/CenterContainer"]
material = SubResource( 1677 )
position = Vector2( 221.5, 600 )
scale = Vector2( 2.08863, 2.08863 )
texture = ExtResource( 12 )

[node name="HBoxContainer" type="HBoxContainer" parent="GameMenu/MainMenu"]
margin_right = 489.0
margin_bottom = 1080.0
mouse_filter = 0
alignment = 1

[node name="VBoxContainer" type="VBoxContainer" parent="GameMenu/MainMenu/HBoxContainer"]
margin_right = 489.0
margin_bottom = 1080.0

[node name="Label" type="Label" parent="GameMenu/MainMenu/HBoxContainer/VBoxContainer"]
margin_right = 489.0
margin_bottom = 78.0
text = "Главное меню"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Logo" type="TextureRect" parent="GameMenu/MainMenu/HBoxContainer/VBoxContainer"]
margin_top = 82.0
margin_right = 489.0
margin_bottom = 82.0
stretch_mode = 3

[node name="VBoxContainer" type="VBoxContainer" parent="GameMenu/MainMenu/HBoxContainer/VBoxContainer"]
margin_top = 86.0
margin_right = 489.0
margin_bottom = 1080.0
size_flags_vertical = 3
custom_constants/separation = 30
alignment = 1

[node name="New_Game2" type="Button" parent="GameMenu/MainMenu/HBoxContainer/VBoxContainer/VBoxContainer"]
margin_top = 227.0
margin_right = 489.0
margin_bottom = 311.0
text = "Продолжить"

[node name="New_Game" type="Button" parent="GameMenu/MainMenu/HBoxContainer/VBoxContainer/VBoxContainer"]
margin_top = 341.0
margin_right = 489.0
margin_bottom = 425.0
text = "Сохранить"

[node name="New_Game3" type="Button" parent="GameMenu/MainMenu/HBoxContainer/VBoxContainer/VBoxContainer"]
margin_top = 455.0
margin_right = 489.0
margin_bottom = 539.0
text = "Загрузить"

[node name="Settings" type="Button" parent="GameMenu/MainMenu/HBoxContainer/VBoxContainer/VBoxContainer"]
margin_top = 569.0
margin_right = 489.0
margin_bottom = 653.0
text = "Главное меню"

[node name="Settings3" type="Button" parent="GameMenu/MainMenu/HBoxContainer/VBoxContainer/VBoxContainer"]
margin_top = 683.0
margin_right = 489.0
margin_bottom = 767.0
text = "Рабочий стол"

[connection signal="pressed" from="GameMenu/MainMenu/HBoxContainer/VBoxContainer/VBoxContainer/New_Game2" to="." method="_on_New_Game2_pressed"]
[connection signal="pressed" from="GameMenu/MainMenu/HBoxContainer/VBoxContainer/VBoxContainer/Settings" to="GameMenu/MainMenu" method="_on_Settings_pressed"]
[connection signal="pressed" from="GameMenu/MainMenu/HBoxContainer/VBoxContainer/VBoxContainer/Settings3" to="GameMenu/MainMenu" method="_on_Settings3_pressed"]
